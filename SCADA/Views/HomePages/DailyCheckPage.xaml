<UserControl
    x:Class="SCADA.Views.HomePages.DailyCheckPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:SCADA.Views.HomePages"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:prism="http://prismlibrary.com/"
    d:DesignHeight="450"
    d:DesignWidth="800"
    FontFamily="微软雅黑"
    mc:Ignorable="d">
    <Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition />
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <StackPanel Margin="3" Orientation="Horizontal">
                <TextBlock Text="设备编号：" />
                <materialDesign:Card Margin="3,0,10,0" Padding="5,0">
                    <TextBlock Text="{Binding EquipmentNo}" />
                </materialDesign:Card>
                <TextBlock Text="点检文件编号：" />
                <materialDesign:Card Margin="3,0,10,0" Padding="5,0">
                    <TextBlock Text="{Binding DocNo}" />
                </materialDesign:Card>
                <TextBlock Text="目视文件编号：" />
                <materialDesign:Card Margin="3,0,10,0" Padding="5,0">
                    <TextBlock Text="{Binding MINo}" />
                </materialDesign:Card>
            </StackPanel>
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <ScrollViewer
                    HorizontalScrollBarVisibility="Auto"
                    PreviewMouseWheel="ScrollViewer_PreviewMouseWheel"
                    VerticalScrollBarVisibility="auto">
                    <ListView
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Top"
                        ItemsSource="{Binding ContentList}">
                        <ListView.View>
                            <GridView>
                                <GridView.ColumnHeaderContainerStyle>
                                    <Style BasedOn="{StaticResource {x:Type GridViewColumnHeader}}" TargetType="GridViewColumnHeader">
                                        <Setter Property="Padding" Value="2,5" />
                                        <Setter Property="Margin" Value="0" />
                                        <Setter Property="HorizontalAlignment" Value="Center" />
                                    </Style>
                                </GridView.ColumnHeaderContainerStyle>
                                <GridViewColumn Header="完成点检">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <ToggleButton
                                                Margin="0"
                                                Padding="0"
                                                HorizontalAlignment="Center"
                                                Content="{materialDesign:PackIcon Kind=Close}"
                                                IsChecked="{Binding IsOK, Mode=TwoWay}"
                                                Style="{StaticResource MaterialDesignSwitchToggleButton}">
                                                <materialDesign:ToggleButtonAssist.SwitchTrackOnBackground>
                                                    <SolidColorBrush Color="Green" />
                                                </materialDesign:ToggleButtonAssist.SwitchTrackOnBackground>
                                                <materialDesign:ToggleButtonAssist.SwitchTrackOffBackground>
                                                    <SolidColorBrush Color="Red" />
                                                </materialDesign:ToggleButtonAssist.SwitchTrackOffBackground>
                                            </ToggleButton>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Header="序号">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock
                                                VerticalAlignment="Center"
                                                Text="{Binding ID, Mode=TwoWay}"
                                                TextAlignment="Center"
                                                TextWrapping="WrapWithOverflow" />
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Width="auto" Header="点检内容">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock
                                                Width="auto"
                                                VerticalAlignment="Center"
                                                Text="{Binding Content, Mode=TwoWay}"
                                                TextWrapping="WrapWithOverflow" />
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Width="auto" Header="判断方法">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock
                                                Width="auto"
                                                VerticalAlignment="Center"
                                                Text="{Binding Method, Mode=TwoWay}"
                                                TextWrapping="WrapWithOverflow" />
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Width="auto">
                                    <GridViewColumn.Header>
                                        <TextBlock Text="判断标准" TextAlignment="Center" />
                                    </GridViewColumn.Header>
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock
                                                Width="auto"
                                                VerticalAlignment="Center"
                                                Text="{Binding Standard, Mode=TwoWay}"
                                                TextWrapping="WrapWithOverflow" />
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Width="auto" Header="数值(如需)">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBox
                                                Width="auto"
                                                VerticalAlignment="Center"
                                                materialDesign:HintAssist.Hint="输入数值"
                                                Text="{Binding Value, Mode=TwoWay}"
                                                TextWrapping="WrapWithOverflow" />
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                                <GridViewColumn Width="auto" Header="操作">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                                                <Button
                                                    Margin="10"
                                                    Command="{Binding DataContext.CheckImage, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}}"
                                                    CommandParameter="{Binding}"
                                                    Content="查看图片" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>
                    </ListView>
                </ScrollViewer>
                <Viewbox
                    Grid.Column="1"
                    MaxWidth="400"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                    <Image Source="{Binding ImageSource}" Stretch="Uniform" />
                </Viewbox>
            </Grid>
            <StackPanel
                Grid.Row="2"
                Margin="10"
                Orientation="Vertical">
                <TextBlock Text="备注：" />
                <TextBlock
                    HorizontalAlignment="Stretch"
                    Text="{Binding Remark}"
                    TextWrapping="WrapWithOverflow" />
            </StackPanel>
            <Grid Grid.Row="3" MaxHeight="150">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>
                <TextBox
                    VerticalAlignment="Top"
                    materialDesign:HintAssist.Hint="留言区"
                    AcceptsReturn="True"
                    Style="{StaticResource MaterialDesignOutlinedTextBox}"
                    Text="{Binding Problem, Mode=TwoWay}"
                    TextWrapping="Wrap"
                    VerticalScrollBarVisibility="Auto" />
                <StackPanel
                    Grid.Column="1"
                    Margin="5"
                    Orientation="Horizontal">
                    <Button
                        Width="200"
                        Height="80"
                        Margin="20,0"
                        Command="{Binding StartTiming}"
                        Content="开始点检"
                        FontSize="30" />
                    <Button
                        Width="100"
                        Height="80"
                        Margin="20,0"
                        Command="{Binding Save}"
                        Content="保存"
                        FontSize="30" />
                    <Button
                        Width="100"
                        Height="80"
                        Margin="20,0,40,0"
                        Command="{Binding Submit}"
                        Content="{Binding SubmitContent}"
                        FontSize="30"
                        IsEnabled="{Binding IsSubmitBtnEnable}" />
                </StackPanel>
            </Grid>
        </Grid>
        <materialDesign:Snackbar
            Width="auto"
            Margin="20"
            HorizontalAlignment="Left"
            VerticalAlignment="Bottom"
            HorizontalContentAlignment="Center"
            VerticalContentAlignment="Center"
            FontFamily="微软雅黑"
            MessageQueue="{Binding Message}" />
    </Grid>
</UserControl>